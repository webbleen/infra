[English](README.md) | [æ—¥æœ¬èª](README.ja.md)

# åŸºç¡€è®¾æ–½ç®¡ç† (Infrastructure)

è¿™ä¸ªç›®å½•åŒ…å«äº†å®Œæ•´çš„æœ¬åœ°å¼€å‘ç¯å¢ƒåŸºç¡€è®¾æ–½æœåŠ¡ï¼Œæä¾›æ•°æ®åº“ã€ç¼“å­˜ã€æœç´¢ã€å­˜å‚¨ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰æœåŠ¡ã€‚æ”¯æŒæœ¬åœ°å¼€å‘å’Œäº‘ç«¯éƒ¨ç½²ã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

åŸºç¡€è®¾æ–½ç®¡ç†å·¥å…·æä¾›ï¼š
- **æœ¬åœ°å¼€å‘ç¯å¢ƒ**ï¼šå®Œæ•´çš„å¼€å‘åŸºç¡€è®¾æ–½
- **äº‘ç«¯éƒ¨ç½²æ”¯æŒ**ï¼šRailway ç­‰äº‘å¹³å°éƒ¨ç½²
- **ç»Ÿä¸€ç®¡ç†**ï¼šMakefile æ ‡å‡†åŒ–ç®¡ç†
- **å¤šç¯å¢ƒæ”¯æŒ**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒé…ç½®

## ğŸ› ï¸ æœåŠ¡åˆ—è¡¨

### æ•°æ®åº“æœåŠ¡
- **PostgreSQL 15** - å…³ç³»å‹æ•°æ®åº“ï¼Œæ”¯æŒ ACID äº‹åŠ¡
- **MySQL 8.0** - å…³ç³»å‹æ•°æ®åº“ï¼Œé«˜æ€§èƒ½æŸ¥è¯¢
- **MongoDB 7** - æ–‡æ¡£æ•°æ®åº“ï¼Œçµæ´»çš„æ•°æ®ç»“æ„

### ç¼“å­˜æœåŠ¡
- **Redis 7** - å†…å­˜ç¼“å­˜ï¼Œé«˜æ€§èƒ½æ•°æ®å­˜å‚¨

### æœç´¢æœåŠ¡
- **Elasticsearch 8.11** - å…¨æ–‡æœç´¢å¼•æ“
- **Kibana 8.11** - æ•°æ®å¯è§†åŒ–å’Œåˆ†æå¹³å°

### å­˜å‚¨æœåŠ¡
- **MinIO** - å¯¹è±¡å­˜å‚¨ï¼ŒS3 å…¼å®¹çš„å­˜å‚¨æœåŠ¡

### æ¶ˆæ¯é˜Ÿåˆ—
- **RabbitMQ 3** - æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯æ¨¡å¼

## ğŸ¯ æœåŠ¡ä½¿ç”¨åœºæ™¯

### æ•°æ®åº“æœåŠ¡
- **PostgreSQL**: ä¸»æ•°æ®åº“ï¼Œå­˜å‚¨ç»“æ„åŒ–æ•°æ®
- **MySQL**: å¤‡ç”¨æ•°æ®åº“ï¼Œæ”¯æŒç‰¹å®šä¸šåŠ¡éœ€æ±‚
- **MongoDB**: å­˜å‚¨éç»“æ„åŒ–æ•°æ®å’Œæ—¥å¿—

### ç¼“å­˜æœåŠ¡
- **Redis**: ç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼Œæå‡ç³»ç»Ÿæ€§èƒ½

### æœç´¢æœåŠ¡
- **Elasticsearch**: å®ç°å…¨æ–‡æœç´¢å’Œæ•°æ®åˆ†æ
- **Kibana**: æ•°æ®å¯è§†åŒ–ï¼Œç›‘æ§ç³»ç»ŸçŠ¶æ€

### å­˜å‚¨æœåŠ¡
- **MinIO**: å­˜å‚¨æ–‡ä»¶ã€å›¾ç‰‡ã€è§†é¢‘ç­‰é™æ€èµ„æº

### æ¶ˆæ¯é˜Ÿåˆ—
- **RabbitMQ**: å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼Œè§£è€¦ç³»ç»Ÿç»„ä»¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

#### å¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
# æ–¹æ³•1: ä½¿ç”¨ Makefile (æ¨è)
make start

# æ–¹æ³•2: ä½¿ç”¨ Docker Compose
docker-compose up -d
```

#### æŒ‰éœ€å¯åŠ¨æœåŠ¡

```bash
# ä½¿ç”¨ Makefile
make start-db      # å¯åŠ¨æ•°æ®åº“æœåŠ¡
make start-cache   # å¯åŠ¨ç¼“å­˜æœåŠ¡
make start-search  # å¯åŠ¨æœç´¢æœåŠ¡
make start-storage # å¯åŠ¨å­˜å‚¨æœåŠ¡
make start-queue   # å¯åŠ¨æ¶ˆæ¯é˜Ÿåˆ—
```

### äº‘ç«¯éƒ¨ç½² (Railway)

#### æ”¯æŒçš„æœåŠ¡
- âœ… **MinIO** - å¯¹è±¡å­˜å‚¨
- âœ… **RabbitMQ** - æ¶ˆæ¯é˜Ÿåˆ—
- âš ï¸ **Elasticsearch** - éœ€è¦ä»˜è´¹è®¡åˆ’
- âš ï¸ **Kibana** - éœ€è¦ä»˜è´¹è®¡åˆ’

#### éƒ¨ç½²æ­¥éª¤
1. åœ¨ Railway åˆ›å»ºæ–°é¡¹ç›®
2. æ·»åŠ  PostgreSQL å’Œ Redis æœåŠ¡ï¼ˆRailway åŸç”Ÿï¼‰
3. éƒ¨ç½² MinIO å’Œ RabbitMQï¼ˆDocker æ–¹å¼ï¼‰
4. æ ¹æ®éœ€è¦éƒ¨ç½² Elasticsearch å’Œ Kibana

## ç®¡ç†å‘½ä»¤

### ä½¿ç”¨ Makefile (æ¨è)

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
make help

# åŸºç¡€å‘½ä»¤
make start      # å¯åŠ¨æ‰€æœ‰æœåŠ¡
make stop       # åœæ­¢æ‰€æœ‰æœåŠ¡
make restart    # é‡å¯æ‰€æœ‰æœåŠ¡
make logs       # æŸ¥çœ‹æœåŠ¡æ—¥å¿—
make status     # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
make clean      # æ¸…ç†æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬æ•°æ®å·ï¼‰

# æ•°æ®åº“è¿æ¥
make shell-postgres  # è¿æ¥åˆ° PostgreSQL
make shell-mysql     # è¿æ¥åˆ° MySQL
make shell-mongodb   # è¿æ¥åˆ° MongoDB
make shell-redis     # è¿æ¥åˆ° Redis

# æ•°æ®å¤‡ä»½
make backup-postgres  # å¤‡ä»½ PostgreSQL
make backup-mysql     # å¤‡ä»½ MySQL
make backup-mongodb   # å¤‡ä»½ MongoDB

# æ•°æ®æ¢å¤
make restore-postgres FILE=backup.sql  # æ¢å¤ PostgreSQL
make restore-mysql FILE=backup.sql     # æ¢å¤ MySQL

# æŒ‰éœ€å¯åŠ¨
make start-db      # å¯åŠ¨æ•°æ®åº“æœåŠ¡
make start-cache   # å¯åŠ¨ç¼“å­˜æœåŠ¡
make start-search  # å¯åŠ¨æœç´¢æœåŠ¡
make start-storage # å¯åŠ¨å­˜å‚¨æœåŠ¡
make start-queue   # å¯åŠ¨æ¶ˆæ¯é˜Ÿåˆ—

# ç›‘æ§
make monitor       # æ˜¾ç¤ºæœåŠ¡è®¿é—®åœ°å€
```

## æœåŠ¡é…ç½®

### PostgreSQL
- **ç«¯å£**: 5432
- **ç”¨æˆ·å**: postgres
- **å¯†ç **: password
- **æ•°æ®åº“**: postgres, dailyzen, test_db, staging_db

### MySQL
- **ç«¯å£**: 3306
- **ç”¨æˆ·å**: root / dev
- **å¯†ç **: password
- **æ•°æ®åº“**: dev

### MongoDB
- **ç«¯å£**: 27017
- **ç”¨æˆ·å**: admin
- **å¯†ç **: password

### Redis
- **ç«¯å£**: 6379
- **æ— å¯†ç **

### Elasticsearch
- **ç«¯å£**: 9200 (HTTP), 9300 (TCP)
- **æ— è®¤è¯**

### Kibana
- **ç«¯å£**: 5601
- **æ— è®¤è¯**

### MinIO
- **ç«¯å£**: 9000 (API), 9001 (Console)
- **ç”¨æˆ·å**: admin
- **å¯†ç **: password123

### RabbitMQ
- **ç«¯å£**: 5672 (AMQP), 15672 (Management)
- **ç”¨æˆ·å**: admin
- **å¯†ç **: password

## æ•°æ®æŒä¹…åŒ–

æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨ Docker æ•°æ®å·ä¸­ï¼Œå³ä½¿å®¹å™¨é‡å¯æ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚æ•°æ®å·ä½ç½®ï¼š

- PostgreSQL: `postgres_data`
- MySQL: `mysql_data`
- MongoDB: `mongodb_data`
- Redis: `redis_data`
- Elasticsearch: `elasticsearch_data`
- MinIO: `minio_data`
- RabbitMQ: `rabbitmq_data`

## ç½‘ç»œé…ç½®

æ‰€æœ‰æœåŠ¡éƒ½åœ¨ `dev-network` ç½‘ç»œä¸­ï¼Œå¯ä»¥é€šè¿‡æœåŠ¡åç›¸äº’è®¿é—®ï¼š

- PostgreSQL: `postgres:5432`
- MySQL: `mysql:3306`
- MongoDB: `mongodb:27017`
- Redis: `redis:6379`
- Elasticsearch: `elasticsearch:9200`
- Kibana: `kibana:5601`
- MinIO: `minio:9000`
- RabbitMQ: `rabbitmq:5672`

## æ•…éšœæ’é™¤

### æœåŠ¡å¯åŠ¨å¤±è´¥
1. æ£€æŸ¥ Docker æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
3. æŸ¥çœ‹æœåŠ¡æ—¥å¿—: `make logs` æˆ– `docker-compose logs`

### æ•°æ®ä¸¢å¤±
1. æ£€æŸ¥æ•°æ®å·æ˜¯å¦å­˜åœ¨: `docker volume ls`
2. æ£€æŸ¥å®¹å™¨çŠ¶æ€: `make status`
3. å¦‚æœéœ€è¦é‡ç½®æ•°æ®ï¼Œè¿è¡Œ: `make clean`

### ç½‘ç»œè¿æ¥é—®é¢˜
1. æ£€æŸ¥ç½‘ç»œæ˜¯å¦å­˜åœ¨: `docker network ls`
2. é‡æ–°åˆ›å»ºç½‘ç»œ: `docker network create dev-network`

## å¼€å‘å»ºè®®

### æœ¬åœ°å¼€å‘
1. **ä½¿ç”¨ Makefile**: æ¨èä½¿ç”¨ `make` å‘½ä»¤è¿›è¡Œç®¡ç†ï¼Œæ›´åŠ æ ‡å‡†åŒ–
2. **æ•°æ®å¤‡ä»½**: å®šæœŸå¤‡ä»½é‡è¦æ•°æ®
3. **èµ„æºç›‘æ§**: æ³¨æ„å†…å­˜å’Œç£ç›˜ä½¿ç”¨æƒ…å†µ
4. **ç‰ˆæœ¬æ§åˆ¶**: å°†é…ç½®æ–‡ä»¶çº³å…¥ç‰ˆæœ¬æ§åˆ¶
5. **ç¯å¢ƒéš”ç¦»**: ä¸ºä¸åŒé¡¹ç›®ä½¿ç”¨ä¸åŒçš„æ•°æ®å·å‰ç¼€

### ç”Ÿäº§éƒ¨ç½²
1. **æœåŠ¡é€‰æ‹©**: æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©æœåŠ¡ï¼Œé¿å…è¿‡åº¦é…ç½®
2. **æˆæœ¬ä¼˜åŒ–**: ä¼˜å…ˆä½¿ç”¨äº‘å¹³å°åŸç”ŸæœåŠ¡
3. **ç›‘æ§å‘Šè­¦**: è®¾ç½®é€‚å½“çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶
4. **æ•°æ®å®‰å…¨**: å®šæœŸå¤‡ä»½å’ŒåŠ å¯†æ•æ„Ÿæ•°æ®
5. **æ€§èƒ½ä¼˜åŒ–**: æ ¹æ®ä½¿ç”¨æƒ…å†µè°ƒæ•´èµ„æºé…ç½®

## ç¯å¢ƒé…ç½®

### å¼€å‘ç¯å¢ƒ
- æ‰€æœ‰æœåŠ¡éƒ½åœ¨æœ¬åœ°è¿è¡Œ
- ä½¿ç”¨ Docker æ•°æ®å·æŒä¹…åŒ–æ•°æ®
- æ”¯æŒçƒ­é‡è½½å’Œè°ƒè¯•

### æµ‹è¯•ç¯å¢ƒ
- ä½¿ç”¨ Railway æˆ–ç±»ä¼¼å¹³å°
- é…ç½®ä¸ç”Ÿäº§ç¯å¢ƒç›¸ä¼¼
- ç”¨äºé›†æˆæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•

### ç”Ÿäº§ç¯å¢ƒ
- ä½¿ç”¨äº‘å¹³å°åŸç”ŸæœåŠ¡
- é«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡
- ç›‘æ§å’Œæ—¥å¿—æ”¶é›†

## ç›‘æ§ä¸ç»´æŠ¤

### å¥åº·æ£€æŸ¥
```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
make status

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
make logs

# ç›‘æ§æœåŠ¡è®¿é—®åœ°å€
make monitor
```

### æ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½ PostgreSQL
make backup-postgres

# å¤‡ä»½ MySQL
make backup-mysql

# å¤‡ä»½ MongoDB
make backup-mongodb
```

### æ•…éšœæ’é™¤
1. **æœåŠ¡å¯åŠ¨å¤±è´¥**: æ£€æŸ¥ Docker çŠ¶æ€å’Œç«¯å£å ç”¨
2. **æ•°æ®ä¸¢å¤±**: æ£€æŸ¥æ•°æ®å·å’Œå¤‡ä»½
3. **ç½‘ç»œé—®é¢˜**: æ£€æŸ¥ç½‘ç»œé…ç½®å’Œé˜²ç«å¢™
4. **æ€§èƒ½é—®é¢˜**: ç›‘æ§èµ„æºä½¿ç”¨æƒ…å†µ

## éƒ¨ç½²æŒ‡å—

### Railway éƒ¨ç½²
1. åˆ›å»º Railway é¡¹ç›®
2. æ·»åŠ æ•°æ®åº“å’Œç¼“å­˜æœåŠ¡
3. éƒ¨ç½² MinIO å’Œ RabbitMQ
4. é…ç½®ç¯å¢ƒå˜é‡
5. éƒ¨ç½²åº”ç”¨æœåŠ¡

### å…¶ä»–äº‘å¹³å°
- **AWS**: ä½¿ç”¨ RDSã€ElastiCacheã€S3 ç­‰æœåŠ¡
- **Google Cloud**: ä½¿ç”¨ Cloud SQLã€Memorystoreã€Cloud Storage ç­‰
- **Azure**: ä½¿ç”¨ Azure Databaseã€Redis Cacheã€Blob Storage ç­‰

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒæ‰€æœ‰æ ¸å¿ƒæœåŠ¡
- å®Œæ•´çš„ Makefile ç®¡ç†
- Railway éƒ¨ç½²æ”¯æŒ

